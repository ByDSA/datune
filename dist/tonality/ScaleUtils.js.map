{"version":3,"file":"ScaleUtils.js","sourceRoot":"","sources":["../../src/tonality/ScaleUtils.ts"],"names":[],"mappings":"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","sourcesContent":["import { Scale } from './Scale';\r\nimport { NameUtils } from '../lang/NameUtils';\r\nimport { ChromaticChordPattern } from '../chords/chromatic/ChromaticChordPattern';\r\nimport { ScaleModeUtils } from './ScaleModeUtils';\r\n\r\nexport interface SourceScaleInfo {\r\n    scale: Scale,\r\n    mode: number\r\n}\r\n\r\nexport class ScaleUtils {\r\n    private constructor() {\r\n    }\r\n\r\n    public static toString(scale: Scale): string {\r\n        switch (scale) {\r\n            case Scale.MAJOR: return \"MAJOR\";\r\n            case Scale.MINOR: return \"MINOR\";\r\n            case Scale.DORIAN: return \"DORIAN\";\r\n            case Scale.PHRYGIAN: return \"PHRYGIAN\";\r\n            case Scale.LYDIAN: return \"LYDIAN\";\r\n            case Scale.MIXOLYDIAN: return \"MIXOLYDIAN\";\r\n            case Scale.LOCRIAN: return \"LOCRIAN\";\r\n\r\n            case Scale.HARMONIC_MINOR: return \"HARMONIC MINOR\";\r\n            case Scale.LOCRIAN_a6: return this.toString(Scale.LOCRIAN) + \" \" + NameUtils.alts(1) + \"6\";\r\n            case Scale.IONIAN_a5: return \"IONIAN \" + NameUtils.alts(1) + \"5\";\r\n            case Scale.DORIAN_a4: return this.toString(Scale.DORIAN) + \" \" + NameUtils.alts(1) + \"4\";\r\n            case Scale.MIXOLYDIAN_b9_b13: return this.toString(Scale.MIXOLYDIAN) + \" \" + NameUtils.alts(-1) + \"9\" + NameUtils.alts(-1) + \"13\";\r\n            case Scale.LYDIAN_a2: return this.toString(Scale.LYDIAN) + \" \" + NameUtils.alts(1) + \"2\";\r\n            case Scale.SUPERLOCRIAN_bb7: return this.toString(Scale.SUPERLOCRIAN) + \" \" + NameUtils.alts(-2) + \"7\";\r\n\r\n            case Scale.HARMONIC_MAJOR: return \"HARMONIC MAJOR\";\r\n            case Scale.DORIAN_b5: return this.toString(Scale.DORIAN) + \" \" + NameUtils.alts(-1) + \"5\";\r\n            case Scale.PHRYGIAN_b4: return this.toString(Scale.PHRYGIAN) + \" \" + NameUtils.alts(-1) + \"4\";\r\n            case Scale.LYDIAN_b3: return this.toString(Scale.LYDIAN) + \" \" + NameUtils.alts(-1) + \"3\";\r\n            case Scale.MIXOLYDIAN_b2: return this.toString(Scale.MIXOLYDIAN) + \" \" + NameUtils.alts(-1) + \"2\";\r\n            case Scale.AEOLIAN_b1: return this.toString(Scale.LYDIAN) + \" AUGMENTED \" + NameUtils.alts(1) + \"2\";\r\n            case Scale.LOCRIAN_bb7: return this.toString(Scale.LOCRIAN) + \" \" + NameUtils.alts(-2) + \"7\";\r\n\r\n            case Scale.MELODIC_MINOR: return \"MELODIC MINOR\";\r\n            case Scale.DORIAN_b2: return this.toString(Scale.DORIAN) + \" \" + NameUtils.alts(-1) + \"2\";\r\n            case Scale.LYDIAN_a5: return this.toString(Scale.LYDIAN) + \" \" + NameUtils.alts(1) + \"5\";\r\n            case Scale.LYDIAN_b7: return this.toString(Scale.LYDIAN) + \" \" + NameUtils.alts(-1) + \"7\";\r\n            case Scale.MIXOLYDIAN_b13: return this.toString(Scale.MIXOLYDIAN) + \" \" + NameUtils.alts(-1) + \"13\";\r\n            case Scale.LOCRIAN_a2: return this.toString(Scale.LOCRIAN) + \" \" + NameUtils.alts(1) + \"2\";\r\n            case Scale.SUPERLOCRIAN: return \"SUPER\" + this.toString(Scale.LOCRIAN);\r\n\r\n            case Scale.DOUBLE_HARMONIC: return \"DOUBLE HARMONIC\";\r\n            case Scale.LYDIAN_a2_a6: return this.toString(Scale.LYDIAN) + \" \" + NameUtils.alts(1) + \"2\" + NameUtils.alts(1) + \"6\";\r\n            case Scale.ULTRAPHRYGIAN: return \"ULTRA\" + this.toString(Scale.PHRYGIAN);\r\n            case Scale.HUNGARIAN_MINOR: return \"HUNGARIAN MINOR\"\r\n            case Scale.ORIENTAL: return \"ORIENTAL\";\r\n            case Scale.IONIAN_AUGMENTED_a2: return \"IONIAN AUGMENTED \" + NameUtils.alts(1) + \"2\";\r\n            case Scale.LOCRIAN_bb3_bb7: return this.toString(Scale.LOCRIAN) + \" \" + NameUtils.alts(-2) + \"3\" + NameUtils.alts(-2) + \"7\";\r\n\r\n            case Scale.NEAPOLITAN_MINOR: return \"NAPOLITAN MINOR\";\r\n            case Scale.NEAPOLITAN_MAJOR: return \"NAPOLITAN MAJOR\";\r\n\r\n            // 6\r\n            case Scale.BLUES_b5: return \"BLUES \" + NameUtils.alts(-1) + \"5\";\r\n            case Scale.BLUES_a4: return \"BLUES \" + NameUtils.alts(1) + \"4\";\r\n\r\n            case Scale.WHOLE_TONE: return \"WHOLE TONE\";\r\n\r\n            // 5\r\n            case Scale.PENTATONIC_MINOR: return this.toString(Scale.PENTATONIC) + \" MINOR\";\r\n            case Scale.PENTATONIC: return \"PENTATONIC\";\r\n            case Scale.EGYPCIAN: return \"EGYPCIAN\";\r\n            case Scale.BLUES_MINOR: return \"BLUES MINOR\";\r\n            case Scale.BLUES_MAJOR: return \"BLUES MAJOR\";\r\n\r\n            // 12\r\n            case Scale.CHROMATIC: return \"CHROMATIC\";\r\n\r\n            case Scale.AUGMENTED_TRIAD: return \"AUGMENTED TRIAD\";\r\n            case Scale.DIMINISHED_7th: return \"DIMINISHED 7th\";\r\n            case Scale.MESSIAEN_V_TRUNCATED: return \"MESSIAEN V TRUNCATED\";\r\n            case Scale.DOM7b5: return \"DOM7\" + NameUtils.alts(-1) + \"5\";\r\n            case Scale.MESSIAEN_INV_III_V_TRUNCATED_n2: return \"MESSIAEN INV. III V TRUNCATED n2\";\r\n            case Scale.HALF_DIMINISHED: return \"HALF DIMINISHED\";\r\n            case Scale.MESSIAEN_V: return \"MESSIAEN V\";\r\n            case Scale.RAGA_INDRUPRIYA_INDIA: return \"RAGA INDRUPRIYA INDIA\";\r\n            case Scale.MESSIAEN_II_TRUNCATED_n3: return \"MESSIAEN II TRUNCATED n3\";\r\n            case Scale.MESSIAEN_III_INV: return \"MESSIAEN III INV\";\r\n            case Scale.MESSIAEN_IV: return \"MESSIAEN IV\";\r\n            case Scale.MESSIAEN_VI: return \"MESSIAEN VI\";\r\n            case Scale.MESSIAEN_VII: return \"MESSIAEN VII\";\r\n\r\n            case Scale.BEBOP_MAJOR: return \"BEBOP MAJOR\";\r\n        }\r\n\r\n        return this.toStringByIntervals(scale);\r\n    }\r\n\r\n    public static getSourceScaleFrom(scale: Scale): SourceScaleInfo {\r\n        switch (scale) {\r\n            case Scale.MAJOR: return { scale: Scale.MAJOR, mode: 1 };\r\n            case Scale.DORIAN: return { scale: Scale.MAJOR, mode: 2 };\r\n            case Scale.PHRYGIAN: return { scale: Scale.MAJOR, mode: 3 };\r\n            case Scale.LYDIAN: return { scale: Scale.MAJOR, mode: 4 };\r\n            case Scale.MIXOLYDIAN: return { scale: Scale.MAJOR, mode: 5 };\r\n            case Scale.MINOR: return { scale: Scale.MAJOR, mode: 6 };\r\n            case Scale.LOCRIAN: return { scale: Scale.MAJOR, mode: 7 };\r\n\r\n            case Scale.HARMONIC_MINOR: return { scale: Scale.HARMONIC_MINOR, mode: 1 };\r\n            case Scale.LOCRIAN_a6: return { scale: Scale.HARMONIC_MINOR, mode: 2 };\r\n            case Scale.IONIAN_a5: return { scale: Scale.HARMONIC_MINOR, mode: 3 };\r\n            case Scale.DORIAN_a4: return { scale: Scale.HARMONIC_MINOR, mode: 4 };\r\n            case Scale.MIXOLYDIAN_b9_b13: return { scale: Scale.HARMONIC_MINOR, mode: 5 };\r\n            case Scale.LYDIAN_a2: return { scale: Scale.HARMONIC_MINOR, mode: 6 };\r\n            case Scale.SUPERLOCRIAN_bb7: return { scale: Scale.HARMONIC_MINOR, mode: 7 };\r\n\r\n            case Scale.MELODIC_MINOR: return { scale: Scale.MELODIC_MINOR, mode: 1 };\r\n            case Scale.DORIAN_b2: return { scale: Scale.MELODIC_MINOR, mode: 2 };\r\n            case Scale.LYDIAN_a5: return { scale: Scale.MELODIC_MINOR, mode: 3 };\r\n            case Scale.LYDIAN_b7: return { scale: Scale.MELODIC_MINOR, mode: 4 };\r\n            case Scale.MIXOLYDIAN_b13: return { scale: Scale.MELODIC_MINOR, mode: 5 };\r\n            case Scale.LOCRIAN_a2: return { scale: Scale.MELODIC_MINOR, mode: 6 };\r\n            case Scale.SUPERLOCRIAN: return { scale: Scale.MELODIC_MINOR, mode: 7 };\r\n\r\n            case Scale.PENTATONIC: return { scale: Scale.PENTATONIC, mode: 1 };\r\n            case Scale.EGYPCIAN: return { scale: Scale.PENTATONIC, mode: 2 };\r\n            case Scale.BLUES_MINOR: return { scale: Scale.PENTATONIC, mode: 3 };\r\n            case Scale.BLUES_MAJOR: return { scale: Scale.PENTATONIC, mode: 4 };\r\n            case Scale.PENTATONIC_MINOR: return { scale: Scale.PENTATONIC, mode: 5 };\r\n\r\n            case Scale.HARMONIC_MAJOR: return { scale: Scale.HARMONIC_MAJOR, mode: 1 };\r\n            case Scale.DORIAN_b5: return { scale: Scale.HARMONIC_MAJOR, mode: 2 };\r\n            case Scale.PHRYGIAN_b4: return { scale: Scale.HARMONIC_MAJOR, mode: 3 };\r\n            case Scale.LYDIAN_b3: return { scale: Scale.HARMONIC_MAJOR, mode: 4 };\r\n            case Scale.MIXOLYDIAN_b2: return { scale: Scale.HARMONIC_MAJOR, mode: 5 };\r\n            case Scale.AEOLIAN_b1: return { scale: Scale.HARMONIC_MAJOR, mode: 6 };\r\n            case Scale.LOCRIAN_bb7: return { scale: Scale.HARMONIC_MAJOR, mode: 7 };\r\n\r\n            case Scale.DOUBLE_HARMONIC: return { scale: Scale.DOUBLE_HARMONIC, mode: 1 };\r\n            case Scale.LYDIAN_a2_a6: return { scale: Scale.DOUBLE_HARMONIC, mode: 2 };\r\n            case Scale.ULTRAPHRYGIAN: return { scale: Scale.DOUBLE_HARMONIC, mode: 3 };\r\n            case Scale.HUNGARIAN_MINOR: return { scale: Scale.DOUBLE_HARMONIC, mode: 4 };\r\n            case Scale.ORIENTAL: return { scale: Scale.DOUBLE_HARMONIC, mode: 5 };\r\n            case Scale.IONIAN_AUGMENTED_a2: return { scale: Scale.DOUBLE_HARMONIC, mode: 6 };\r\n            case Scale.LOCRIAN_bb3_bb7: return { scale: Scale.DOUBLE_HARMONIC, mode: 7 };\r\n            default:\r\n                let allScales = Scale.all();\r\n                if (allScales.has(scale))\r\n                    return { scale: scale, mode: 1 };\r\n\r\n                let clonedScale = scale.clone();\r\n                for (let i = 2; i <= scale.length(); i++) {\r\n                    let scaleTmp = ScaleModeUtils.getMode(scale, i);\r\n                    if (allScales.has(scale))\r\n                        return { scale: scale, mode: scale.length() - i };\r\n                }\r\n        }\r\n\r\n        return { scale: scale, mode: 1 };\r\n    }\r\n\r\n    private static toStringByIntervals(scale: Scale): string {\r\n        let intervals = scale.getIntervals();\r\n\r\n        let first = true;\r\n        let ret: string = \"\";\r\n        intervals.forEach(i => {\r\n            if (first)\r\n                first = false;\r\n            else\r\n                ret += \"-\";\r\n            ret += i;\r\n        });\r\n\r\n        return ret;\r\n    }\r\n\r\n    public static calculateAbsoluteIntervals(scale: Scale): number[] {\r\n        let absoluteIntervals = [0];\r\n\r\n        let relativeIntervals = Array.from(scale.getIntervals());\r\n        relativeIntervals.pop();\r\n\r\n        let acc = 0;\r\n        relativeIntervals.forEach(n => {\r\n            acc += n;\r\n            absoluteIntervals.push(acc);\r\n        });\r\n\r\n        return absoluteIntervals;\r\n    }\r\n\r\n    public static toStringAboluteIntervals(scale: Scale): string {\r\n        let absoluteIntervals = ScaleUtils.calculateAbsoluteIntervals(scale);\r\n\r\n        let first = true;\r\n        let ret: string = \"\";\r\n        let i = 1;\r\n        absoluteIntervals.forEach(n => {\r\n            if (first)\r\n                first = false;\r\n            else\r\n                ret += \"-\";\r\n            let refNum = ScaleUtils.getRefNum(scale, i);\r\n            ret += ScaleUtils.toStringAboluteInterval(refNum, n);\r\n            i++;\r\n        });\r\n\r\n        return ret;\r\n    }\r\n\r\n\r\n    public static getRefNum(scale: Scale, i: number): number {\r\n        switch (scale) {\r\n            case Scale.BLUES_b5:\r\n                switch (i) {\r\n                    case 2:\r\n                    case 3:\r\n                    case 4:\r\n                        return i + 1;\r\n                }\r\n                break;\r\n            case Scale.BLUES_a4:\r\n                switch (i) {\r\n                    case 2:\r\n                    case 3:\r\n                        return i + 1;\r\n                }\r\n                break;\r\n            case Scale.PENTATONIC:\r\n                switch (i) {\r\n                    case 4:\r\n                    case 5: return i + 1;\r\n                }\r\n                break;\r\n            case Scale.EGYPCIAN:\r\n                switch (i) {\r\n                    case 3:\r\n                    case 4: return i + 1;\r\n                    case 5: return i + 2;\r\n                }\r\n                break;\r\n            case Scale.BLUES_MINOR:\r\n                switch (i) {\r\n                    case 2:\r\n                    case 3: return i + 1;\r\n                    case 4:\r\n                    case 5:\r\n                        return i + 2;\r\n                }\r\n                break;\r\n            case Scale.BLUES_MAJOR:\r\n                switch (i) {\r\n                    case 3:\r\n                    case 4:\r\n                    case 5:\r\n                        return i + 1;\r\n                }\r\n                break;\r\n            case Scale.PENTATONIC_MINOR:\r\n                switch (i) {\r\n                    case 2:\r\n                    case 3:\r\n                    case 4:\r\n                        return i + 1;\r\n                    case 5: return i + 2;\r\n                }\r\n                break;\r\n            case Scale.BEBOP_MAJOR:\r\n                switch (i) {\r\n                    case 7:\r\n                    case 8:\r\n                        return i - 1;\r\n                }\r\n                break;\r\n            case Scale.AUGMENTED_TRIAD:\r\n                switch (i) {\r\n                    case 2: return 3;\r\n                    case 3: return 5;\r\n                }\r\n                break;\r\n            case Scale.DIMINISHED_7th:\r\n            case Scale.DOM7b5:\r\n                switch (i) {\r\n                    case 2: return 3;\r\n                    case 3: return 5;\r\n                    case 4: return 7;\r\n                }\r\n                break;\r\n            default:\r\n                if (scale.length() == 7)\r\n                    return i;\r\n                else if (scale.length() > 7) {\r\n                    switch (scale.getAbsoluteIntervals()[i - 1]) {\r\n                        case 0:\r\n                        case 1:\r\n                            return 1;\r\n                        case 2:\r\n                        case 3:\r\n                            return 2;\r\n                        case 4:\r\n                            return 3;\r\n                        case 5:\r\n                        case 6:\r\n                            return 4;\r\n                        case 7:\r\n                        case 8:\r\n                            return 5;\r\n                        case 9:\r\n                        case 10:\r\n                            return 6;\r\n                        case 11:\r\n                            return 7;\r\n                        default:\r\n                            return 0;\r\n                    }\r\n                }\r\n        }\r\n\r\n        return i;\r\n    }\r\n\r\n    public static toStringAboluteInterval(pos: number, intervalAbsolute: number): string {\r\n        return NameUtils.alts(intervalAbsolute - ScaleUtils.MAJOR_ABSOLUTE_INTERVALS[pos - 1]) + pos;\r\n    }\r\n\r\n    private static MAJOR_ABSOLUTE_INTERVALS = ScaleUtils.calculateAbsoluteIntervals(Scale.MAJOR);\r\n\r\n    public static toStringParams(scale: Scale): string {\r\n        return this.toString(scale).toUpperCase();\r\n    }\r\n\r\n    public static getChromaticChordPattern(scale: Scale): ChromaticChordPattern {\r\n        let array = [0];\r\n        for (let n of scale.getIntervals()) {\r\n            let newValue = array[array.length - 1] + n;\r\n            array.push(newValue);\r\n        }\r\n\r\n        return ChromaticChordPattern.fromArray(array);\r\n    }\r\n}"]}